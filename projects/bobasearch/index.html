<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> BobaSearch | Yuanqi Wang </title> <meta name="author" content="Yuanqi Wang"> <meta name="description" content="Distributed analytics platform and search engine written in Java, featuring MapReduce, PageRank, and TF-IDF algorithms."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%A8%F0%9F%8F%BB%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://www.yqwong.com/projects/bobasearch/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yuanqi</span> Wang </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">BobaSearch</h1> <p class="post-description">Distributed analytics platform and search engine written in Java, featuring MapReduce, PageRank, and TF-IDF algorithms.</p> </header> <article> <p><a href="https://github.com/plasmas/BobaSearch" rel="external nofollow noopener" target="_blank">Source</a></p> <p><em>Per course policy, access to code is only granted upon request.</em></p> <hr> <h2 id="highlights">Highlights</h2> <ul> <li> <strong>Distributed Analytics Platform</strong>: Implements a robust and scalable search engine and analytics platform using Java, featuring a distributed key-value store and computing framework.</li> <li> <strong>Advanced Search Algorithms</strong>: Utilizes MapReduce, PageRank, and TF-IDF algorithms for efficient indexing, ranking, and retrieval of search results.</li> <li> <strong>High Performance and Fault Tolerance</strong>: Designed to crawl and index one million web pages, leveraging sharding and a master-worker architecture to ensure high performance and fault tolerance.</li> <li> <strong>Real-time Query Processing</strong>: Provides real-time search results with efficient retrieval, score computation, and sorting algorithms for a responsive user experience.</li> </ul> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/bobasearch/fast_food-480.webp 480w,/assets/img/projects/bobasearch/fast_food-800.webp 800w,/assets/img/projects/bobasearch/fast_food-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/bobasearch/fast_food.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="search result for fast food" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/bobasearch/youth-480.webp 480w,/assets/img/projects/bobasearch/youth-800.webp 800w,/assets/img/projects/bobasearch/youth-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/bobasearch/youth.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="search result for youth" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/bobasearch/music-480.webp 480w,/assets/img/projects/bobasearch/music-800.webp 800w,/assets/img/projects/bobasearch/music-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/bobasearch/music.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="search result for music" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Search result list for "fast food" (left), "youth" (middle), and "music" (right). </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/bobasearch/fast_food_detail-480.webp 480w,/assets/img/projects/bobasearch/fast_food_detail-800.webp 800w,/assets/img/projects/bobasearch/fast_food_detail-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/bobasearch/fast_food_detail.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="search result for fast food" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/bobasearch/youth_detail-480.webp 480w,/assets/img/projects/bobasearch/youth_detail-800.webp 800w,/assets/img/projects/bobasearch/youth_detail-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/bobasearch/youth_detail.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="search result for youth" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Top result page for "fast food" (left), "youth" (right). </div> <hr> <h2 id="overview">Overview</h2> <p>BobaSearch is a distributed analytics platform and search engine written in Java. It features a web crawler, a distributed indexing system, and a search engine that uses the PageRank algorithm to rank search results. The system is designed to crawl and index one million web pages, and provide real-time search results based on user queries.</p> <p>The analytics platform is composed of the following components:</p> <ul> <li> <strong>Distributed Key-Value Store (KVS)</strong>: The KVS is used to store the crawled web pages, the index, and the PageRank values. It uses sharding to distribute the data across multiple nodes and ensure fault tolerance. For coordination, the KVS uses a master-worker architecture with a single master node and multiple worker nodes. The master node is responsible for managing the workers and distributing the data, while the worker nodes store the data and perform operations on it.</li> <li> <strong>Flame</strong>: Flame is a distributed computing framework that is used to run MapReduce jobs on the KVS. It provides a simple API for submitting jobs and managing their execution. The analytics platform uses Flame to run the web crawler, the indexer, and the PageRank algorithm.</li> </ul> <hr> <h2 id="challenges">Challenges</h2> <ul> <li> <strong>Low throughput for crawler</strong>. When trying to deploy our crawler, we found that the throughput of our crawler is very slow. To crawl one page, we sometimes need 3-5 seconds. Even worse is that our crawler worker would be stuck at certain pages for a prolonged period of time. We were very confused by this behavior, and had many hypotheses why it happened. For example, we first thought there could be some kind of synchronization problem, where two workers tried to access the same table and caused a deadlock. After some debugging, we finally found that the problem actually lied in the part where we requested robots.txt. If the website did not have a robots.txt, the HttpUrlConnection class would wait for a long time before it dropped the connection. An easy solution to this problem is to set a timeout for requests. With this fix, we can crawl more than 20 pages per second.</li> <li> <strong>Crawler Design and Scalability</strong>. Creating a crawler to fetch one million pages is a significant task. The crawler must be capable of efficiently navigating through web pages, following links, and managing possible issues such as loops or dead ends. Furthermore, the crawler must respect the robots.txt file and deal with different website structures, making this a challenging aspect of the project. The crawler also needs to be scalable and efficient, as crawling can be a time-consuming and resource-intensive process. The use of concurrent or distributed crawling may be required to reach the target of one million pages in a reasonable amount of time.</li> <li> <strong>Indexing and Ranking Algorithm</strong>. The second difficult aspect of the project is implementing the indexing and PageRank algorithm using Flame. The index must be designed in a way that allows for fast retrieval of relevant URLs based on the search query. The PageRank algorithm also involves complex computations to determine the importance of each page based on its incoming links. Both of these tasks require a deep understanding of information retrieval and search engine algorithms.</li> <li> <strong>Real-time Query Processing</strong>. Even though the indexing and PageRank calculation is done in a batch process using Flame, the actual retrieval of relevant URLs, score combination, and sorting must be done in real-time to provide a responsive user experience. The system must be optimized to read the search terms, look up the corresponding entries in the index, fetch the relevant PageRank values, compute the TF/IDF scores, combine the scores, sort the URLs, and assemble the results page as quickly as possible. Designing and implementing an efficient algorithm that can handle all these tasks in real-time is a significant challenge.</li> </ul> <hr> <h2 id="future-improvements">Future Improvements</h2> <ul> <li> <strong>Distributed front-end service</strong>. We could have added a load balancer and a few front-end servers. In this way, we could make the front end a distributed system in itself, and thus increase overall efficiency.</li> <li> <strong>Indexing and Ranking Algorithm</strong>. We could have tried different ways of calculating the TF score as well as different algorithms to calculate the overall score of each page to find the one with a better performance.</li> </ul> <hr> <h2 id="how-to-run">How to Run</h2> <ol> <li>Use IntelliJ to compile the project into a JAR file called MiniGoogle.jar</li> <li>Launch the masters and workers with the following run configurations and params:</li> </ol> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># KVS Master</span>
cis5550.kvs.Master 8000
<span class="c"># KVS Worker</span>
cis5550.kvs.Worker 8001 worker1 localhost:8000
<span class="c"># Flame Master</span>
cis5550.flame.Master 9000 localhost:8000
<span class="c"># Flame Worker</span>
cis5550.flame.Worker 9001 localhost:9000
<span class="c"># Submit Crawler</span>
cis5550.flame.FlameSubmit localhost:9000 crawler.jar cis5550.jobs.Crawler http://simple.crawltest.cis5550.net/
<span class="c"># Submit Indexer</span>
cis5550.flame.FlameSubmit localhost:9000 indexer.jar cis5550.jobs.Indexer
<span class="c"># Submit PageRank</span>
cis5550.flame.FlameSubmit localhost:9000 pagerank.jar cis5550.jobs.PageRank 0.01
<span class="c"># frontend server</span>
cis5550.search.frontend.Server localhost:8000
</code></pre></div></div> <ol> <li>Flame Jars can be compiled using the following commands:</li> </ol> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Pack Crawler</span>
javac src/cis5550/jobs/Crawler.java <span class="nt">-cp</span> lib/webserver.jar:lib/kvs.jar:lib/flame.jar <span class="nt">--source-path</span> src <span class="o">&amp;&amp;</span> <span class="nb">cd </span>src <span class="o">&amp;&amp;</span> jar cvf crawler.jar <span class="nb">.</span> <span class="o">&amp;&amp;</span> <span class="nb">mv </span>crawler.jar ../
<span class="c"># Pack Indexer</span>
javac src/cis5550/jobs/Indexer.java <span class="nt">-cp</span> lib/webserver.jar:lib/kvs.jar:lib/flame.jar <span class="nt">--source-path</span> src <span class="o">&amp;&amp;</span> <span class="nb">cd </span>src <span class="o">&amp;&amp;</span> jar cvf indexer.jar <span class="nb">.</span> <span class="o">&amp;&amp;</span> <span class="nb">mv </span>indexer.jar ../
<span class="c"># Pack PageRank</span>
javac src/cis5550/jobs/PageRank.java <span class="nt">-cp</span> lib/webserver.jar:lib/kvs.jar:lib/flame.jar <span class="nt">--source-path</span> src <span class="o">&amp;&amp;</span> <span class="nb">cd </span>src <span class="o">&amp;&amp;</span> jar cvf pagerank.jar <span class="nb">.</span> <span class="o">&amp;&amp;</span> <span class="nb">mv </span>pagerank.jar ../
</code></pre></div></div> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Yuanqi Wang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: June 30, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>